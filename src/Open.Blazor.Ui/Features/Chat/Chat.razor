@using Microsoft.SemanticKernel
@using Microsoft.SemanticKernel.ChatCompletion
@using Microsoft.SemanticKernel.Connectors.OpenAI
@using System.Text
@inject IJSRuntime JsRuntime
<h3>Basic Chat - Local llama 3</h3>

<FluentStack Id="chatWindow" Orientation="Orientation.Vertical"
             HorizontalAlignment="HorizontalAlignment.Center"
             VerticalAlignment="VerticalAlignment.Top"
             VerticalGap="20"
             Style="height: 85%;margin:10px;overflow-y:auto;padding:10px">

    @if (_discourse is not null)
    {
        @foreach (var message in _discourse.ChatMessages)
        {
            <ChatContent Message="message" />
        }
    }
</FluentStack>

<FluentStack Orientation="Orientation.Horizontal"
             HorizontalAlignment="HorizontalAlignment.Center"
             VerticalAlignment="VerticalAlignment.Bottom">
    <FluentTextArea @bind-Value=_userMessage style="width:700px;margin-top:20px" Placeholder="Let's chat"></FluentTextArea>
    <FluentButton IconStart="@(new Icons.Regular.Size16.Send())"
                  Appearance="Appearance.Accent" OnClick="SendMessage" Disabled="_isChatOngoing" />
</FluentStack>

@code {
  

    private async Task ScrollToBottom()
    {
        await JsRuntime.InvokeVoidAsync("ScrollToBottom", "chatWindow");
    }
}
