@using Markdig
@if (Message is not null)
{
    <div class="chat-content" style="text-align:@_alignment;">
        @if (Message.Role == ChatRole.User)
        {
            <div class="card-container">
                <div class="card">
                    <span style="color: white;">@(Message.Content ?? string.Empty)</span>
                </div>
            </div>

        }
        else
        {
            <FluentPersona Name="Assistant" ImageSize="40px"
                           Initials="A" Style="margin-bottom:5px" />

            @if (string.IsNullOrEmpty(Message.Content))
            {
                <FluentProgress Width="25px" Style="margin-left:10px"></FluentProgress>
            }
            else
            {
                @((MarkupString)Markdown.ToHtml(Message.Content ?? string.Empty))
            }
        }

    </div>
}
@code {

    [Parameter]
    public ChatMessage? Message { get; set; }


    private string _alignment = string.Empty;

    protected override void OnParametersSet()
    {
        _alignment = Message!.Role == ChatRole.Assistant ? "left" : "right";
    }



}


